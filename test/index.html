<section id="container">
    <!-- component container -->
    <div class="dhx_sample-widget" id="diagram"></div>
</section>

<!-- custom styles -->
<style>
    .template {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        background: #F7F7F7;
        width: 100%;
        height: 100%;
        border: 1px solid #DFDFDF;
        overflow: hidden;
    }
    .template span {
        font-weight: 300;
        line-height: 20px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 100%;
        text-align: center;
    }
    .template span:not(:last-child) {
        font-weight: 500;
        margin-top: 16px;
    }
    .template img {
        width: 64px;
        height: 64px;
        pointer-events: none;
        border-radius: 50%;
    }
    .dhx_diagram {
        background: #fff;
    }
</style>

<!-- dataset -->
<script>
  const networkDiagram = [
    {
        "id": 1,
        "type": "networkCard",
        "x": 0,
        "y": 380,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/desktop.svg",
        "text": "Remote expert desktop",
        "ip": "192.168.32.2"
    },
    {
        "id": 2,
        "type": "networkCard",
        "x": 200,
        "y": 0,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/cloud.svg",
        "text": "NGNIX",
        "ip": "192.168.1.4"
    },
    {
        "id": 3,
        "type": "networkCard",
        "x": 0,
        "y": 190,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/fieldworker.svg",
        "text": "User: Field Worker",
        "ip": "192.168.1.5"
    },
    {
        "id": 4,
        "type": "networkCard",
        "x": 200,
        "y": 190,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/server.svg",
        "text": "Storage Server",
        "ip": "192.168.1.6"
    },
    {
        "id": 5,
        "type": "networkCard",
        "x": 420,
        "y": 190,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/server.svg",
        "text": "Event server",
        "ip": "192.168.1.8"
    },
    {
        "id": 6,
        "type": "networkCard",
        "x": 620,
        "y": 190,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/server.svg",
        "text": "PUB/SUB Server",
        "ip": "192.168.1.9"
    },
    {
        "id": 7,
        "type": "networkCard",
        "x": 820,
        "y": 190,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/server.svg",
        "text": "API Server",
        "ip": "192.168.1.10"
    },
    {
        "id": 8,
        "type": "networkCard",
        "x": 1010,
        "y": 190,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/server.svg",
        "text": "STUN/TURN Server",
        "ip": "192.168.1.13"
    },
    {
        "id": 9,
        "type": "networkCard",
        "x": 200,
        "y": 380,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/cloud.svg",
        "text": "AWS S3",
        "ip": "192.168.1.7"
    },
    {
        "id": 10,
        "type": "networkCard",
        "x": 820,
        "y": 390,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/database.svg",
        "text": "Database postgre SQL",
        "ip": "192.168.1.11"
    },
    {
        "id": 11,
        "type": "networkCard",
        "x": 0,
        "y": 0,
        "img": "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/core.svg",
        "text": "Intel MCU",
        "ip": "192.168.1.12"
    },
    {
        "id": "u1584430649613",
        "type": "line",
        "from": 4,
        "to": 9,
        "fromSide": "bottom",
        "toSide": "top",
        "connectType": "elbow",
        "strokeType": "line",
        "backArrow": "",
        "forwardArrow": "filled"
    },
    {
        "id": "u1584430650668",
        "type": "line",
        "from": 5,
        "to": 6,
        "fromSide": "right",
        "toSide": "left",
        "connectType": "elbow",
        "strokeType": "line",
        "backArrow": "filled",
        "forwardArrow": "filled"
    },
    {
        "id": "u1584430650861",
        "type": "line",
        "from": 6,
        "to": 7,
        "fromSide": "right",
        "toSide": "left",
        "connectType": "elbow",
        "strokeType": "line",
        "backArrow": "filled",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207090629",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 5,
        "fromSide": "right",
        "toSide": "top",
        "strokeType": "line",
        "backArrow": "filled",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207092274",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 8,
        "fromSide": "right",
        "toSide": "top",
        "strokeType": "line",
        "backArrow": "filled",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207093512",
        "type": "line",
        "connectType": "elbow",
        "from": 3,
        "to": 2,
        "fromSide": "right",
        "toSide": "left",
        "strokeType": "line",
        "backArrow": "filled",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207094682",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 4,
        "fromSide": "bottom",
        "toSide": "top",
        "strokeType": "line",
        "backArrow": "",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207095202",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 7,
        "fromSide": "right",
        "toSide": "top",
        "strokeType": "line",
        "backArrow": "",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207096551",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 6,
        "fromSide": "right",
        "toSide": "top",
        "strokeType": "line",
        "backArrow": "filled",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207097624",
        "type": "line",
        "connectType": "elbow",
        "from": 7,
        "to": 10,
        "fromSide": "bottom",
        "toSide": "top",
        "strokeType": "line",
        "backArrow": "",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207098776",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 11,
        "fromSide": "left",
        "toSide": "right",
        "strokeType": "line",
        "backArrow": "",
        "forwardArrow": "filled"
    },
    {
        "id": "u1585207099109",
        "type": "line",
        "connectType": "elbow",
        "from": 2,
        "to": 1,
        "fromSide": "left",
        "toSide": "right",
        "strokeType": "line",
        "backArrow": "",
        "forwardArrow": "filled"
    }
  ];

  const defaults = {
    width: 160,
    height: 160,
    img: "https://snippet.dhtmlx.com/codebase/data/diagram/05/img/desktop.svg",
    text: "Network Card",
    ip: "138.68.41.78",
    preview: {
        scale: 0.8
    }
};

const template = config => (`
    <section class='template'>
        <img src='${config.img}' alt='${config.text}'></img>
        <span>${config.text}</span>
        <span>${config.ip}</span>
    </section>
`);

const diagram = new dhx.Diagram("diagram", {
    lineGap: 20
});

diagram.addShape("networkCard", {
    template,
    defaults,
});

diagram.data.parse(networkDiagram);
</script>